(function(a){a.fn.simpleScrollFollow=function(d){var c=[];this.each(function(){c.push(new b(this,d));});return(d!=undefined&&d.instance!=undefined&&d.instance)?a(c):this;
};function b(d,c){this.setOption(c);this.setFollow(d);this.ehScroll();this.ehResize();}a.extend(b.prototype,{setEnabled:function(c){this.option.enabled=c;
if(!this.option.enabled){this.moveDefaultPosition();}},moveDefaultPosition:function(){a(this.follow.elem).css({position:"",top:"",bottom:"",left:"",right:""}).width("");
},setFollow:function(d){var c={};c.elem=d;c.width=a(c.elem).width();c.offset_top=a(c.elem).offset().top;c.offset_bottom=this.calcOffsetBottom(c.elem);c.offset_left=a(c.elem).offset().left;
c.position_top=(a(c.elem).css("top")=="auto")?0:Number(a(c.elem).css("top").replace(/px$/,""));this.follow=c;},setOption:function(c){this.option=a.extend({enabled:true,limit_elem:a("body"),min_width:0},c);
},calcOffsetBottom:function(c){if(c=="window"){return a(window).scrollTop()+a(window).height();}else{return a(c).offset().top+a(c).height()+Number(a(c).css("border-top-width").replace(/px$/,""))+Number(a(c).css("border-bottom-width").replace(/px$/,""))+Number(a(c).css("padding-top").replace(/px$/,""))+Number(a(c).css("padding-bottom").replace(/px$/,""));
}},ehScroll:function(){var c=this;a(window).scroll(function(){if(!c.option.enabled){return false;}if(a(window).width()<c.option.min_width){c.moveDefaultPosition.call(c);
return false;}var f={scroll_top:a(this).scrollTop(),scroll_bottom:a(this).scrollTop()+a(this).height()};var e={offset_top:a(c.follow.elem).offset().top,offset_bottom:c.calcOffsetBottom(c.follow.elem)};
var d={offset_bottom:c.calcOffsetBottom(c.option.limit_elem)};if((d.offset_bottom-c.follow.offset_top)<(e.offset_bottom-e.offset_top)){return false;}if(f.scroll_top<c.follow.offset_top){a(c.follow.elem).css({position:"absolute",top:"",bottom:"",left:"",right:""}).width(c.follow.width);
}else{if(f.scroll_top>d.offset_bottom){a(c.follow.elem).css({position:"absolute",top:d.offset_bottom-c.follow.offset_top-(e.offset_bottom-e.offset_top)+c.follow.position_top_num,bottom:"auto",left:"",right:""}).width(c.follow.width);
}else{if((f.scroll_bottom-f.scroll_top)>(e.offset_bottom-e.offset_top)){if((d.offset_bottom-f.scroll_top)<(e.offset_bottom-e.offset_top)){a(c.follow.elem).css({position:"absolute",top:d.offset_bottom-c.follow.offset_top-(e.offset_bottom-e.offset_top)+c.follow.position_top,bottom:"auto",left:"",right:""}).width(c.follow.width);
}else{a(c.follow.elem).css({position:"fixed",top:0,bottom:"auto",left:c.follow.offset_left,right:"auto"}).width(c.follow.width);}}else{if(f.scroll_bottom>d.offset_bottom){a(c.follow.elem).css({position:"absolute",top:d.offset_bottom-c.follow.offset_top-(e.offset_bottom-e.offset_top)+c.follow.position_top,bottom:"auto",left:"",right:""}).width(c.follow.width);
}else{if((f.scroll_bottom-c.follow.offset_top)>(e.offset_bottom-e.offset_top)){a(c.follow.elem).css({position:"fixed",top:"auto",bottom:0,left:c.follow.offset_left,right:"auto"}).width(c.follow.width);
}else{a(c.follow.elem).css({position:"absolute",top:"",bottom:"",left:"",right:""}).width(c.follow.width);}}}}}});},ehResize:function(){this.timer=false;
var c=this;a(window).resize(function(){if(c.timer!==false){clearTimeout(c.timer);}c.timer=setTimeout(function(){c.moveDefaultPosition.call(c);c.setFollow.call(c,c.follow.elem);
a(window).trigger("scroll");},200);});}});})(jQuery);